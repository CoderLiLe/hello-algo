# [28.æ‰¾å‡ºå­—ç¬¦ä¸²ä¸­ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡](https://leetcode.cn/problems/find-the-index-of-the-first-occurrence-in-a-string/description/)


ç»™ä½ ä¸¤ä¸ªå­—ç¬¦ä¸² `haystack` å’Œ `needle` ï¼Œè¯·ä½ åœ¨ `haystack` å­—ç¬¦ä¸²ä¸­æ‰¾å‡º `needle` å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡ï¼ˆä¸‹æ ‡ä» `0` å¼€å§‹ï¼‰ã€‚å¦‚æœ `needle` ä¸æ˜¯ `haystack` çš„ä¸€éƒ¨åˆ†ï¼Œåˆ™è¿”å›  `-1` ã€‚

 

ç¤ºä¾‹ 1ï¼š
```
è¾“å…¥ï¼šhaystack = "sadbutsad", needle = "sad"
è¾“å‡ºï¼š0
è§£é‡Šï¼š"sad" åœ¨ä¸‹æ ‡ 0 å’Œ 6 å¤„åŒ¹é…ã€‚
ç¬¬ä¸€ä¸ªåŒ¹é…é¡¹çš„ä¸‹æ ‡æ˜¯ 0 ï¼Œæ‰€ä»¥è¿”å› 0 ã€‚
```

ç¤ºä¾‹ 2ï¼š
```
è¾“å…¥ï¼šhaystack = "leetcode", needle = "leeto"
è¾“å‡ºï¼š-1
è§£é‡Šï¼š"leeto" æ²¡æœ‰åœ¨ "leetcode" ä¸­å‡ºç°ï¼Œæ‰€ä»¥è¿”å› -1 ã€‚
```

æç¤ºï¼š

- 1 <= haystack.length, needle.length <= 104
- haystack å’Œ needle ä»…ç”±å°å†™è‹±æ–‡å­—ç¬¦ç»„æˆ

## æœ´ç´ è§£æ³•

ç›´è§‚çš„è§£æ³•çš„æ˜¯ï¼šæšä¸¾åŸä¸² ss ä¸­çš„æ¯ä¸ªå­—ç¬¦ä½œä¸ºã€Œå‘èµ·ç‚¹ã€ï¼Œæ¯æ¬¡ä»åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€å’ŒåŒ¹é…ä¸²çš„ã€Œé¦–ä½ã€å¼€å§‹å°è¯•åŒ¹é…ï¼š

- åŒ¹é…æˆåŠŸï¼šè¿”å›æœ¬æ¬¡åŒ¹é…çš„åŸä¸²ã€Œå‘èµ·ç‚¹ã€ã€‚
- åŒ¹é…å¤±è´¥ï¼šæšä¸¾åŸä¸²çš„ä¸‹ä¸€ä¸ªã€Œå‘èµ·ç‚¹ã€ï¼Œé‡æ–°å°è¯•åŒ¹é…ã€‚

```java
class Solution {
    public int strStr(String ss, String pp) {
        int n = ss.length(), m = pp.length();
        char[] s = ss.toCharArray(), p = pp.toCharArray();
        // æšä¸¾åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€
        for (int i = 0; i <= n - m; i++) {
            // ä»åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€å’ŒåŒ¹é…ä¸²çš„ã€Œé¦–ä½ã€å¼€å§‹ï¼Œå°è¯•åŒ¹é…
            int a = i, b = 0;
            while (b < m && s[a] == p[b]) {
                a++;
                b++;
            }
            // å¦‚æœèƒ½å¤Ÿå®Œå…¨åŒ¹é…ï¼Œè¿”å›åŸä¸²çš„ã€Œå‘èµ·ç‚¹ã€ä¸‹æ ‡
            if (b == m) return i;
        }
        return -1;
    }
}
```

- æ—¶é—´å¤æ‚åº¦ï¼šn ä¸ºåŸä¸²çš„é•¿åº¦ï¼Œm ä¸ºåŒ¹é…ä¸²çš„é•¿åº¦ã€‚å…¶ä¸­æšä¸¾çš„å¤æ‚åº¦ä¸º O(nâˆ’m)ï¼Œæ„é€ å’Œæ¯”è¾ƒå­—ç¬¦ä¸²çš„å¤æ‚åº¦ä¸º O(m)ã€‚æ•´ä½“å¤æ‚åº¦ä¸º O((nâˆ’m)âˆ—m)ã€‚
- ç©ºé—´å¤æ‚åº¦ï¼šO(1)ã€‚

## KMP è§£æ³•

KMP ç®—æ³•æ˜¯ä¸€ä¸ªå¿«é€ŸæŸ¥æ‰¾åŒ¹é…ä¸²çš„ç®—æ³•ï¼Œå®ƒçš„ä½œç”¨å…¶å®å°±æ˜¯æœ¬é¢˜é—®é¢˜ï¼š**å¦‚ä½•å¿«é€Ÿåœ¨ã€ŒåŸå­—ç¬¦ä¸²ã€ä¸­æ‰¾åˆ°ã€ŒåŒ¹é…å­—ç¬¦ä¸²ã€**ã€‚

ä¸Šè¿°çš„æœ´ç´ è§£æ³•ï¼Œä¸è€ƒè™‘å‰ªæçš„è¯å¤æ‚åº¦æ˜¯ O(mâˆ—n) çš„ï¼Œè€Œ KMP ç®—æ³•çš„å¤æ‚åº¦ä¸º O(m+n)ã€‚

**KMP ä¹‹æ‰€ä»¥èƒ½å¤Ÿåœ¨ O(m+n) å¤æ‚åº¦å†…å®ŒæˆæŸ¥æ‰¾ï¼Œæ˜¯å› ä¸ºå…¶èƒ½åœ¨ã€Œéå®Œå…¨åŒ¹é…ã€çš„è¿‡ç¨‹ä¸­æå–åˆ°æœ‰æ•ˆä¿¡æ¯è¿›è¡Œå¤ç”¨ï¼Œä»¥å‡å°‘ã€Œé‡å¤åŒ¹é…ã€çš„æ¶ˆè€—**ã€‚

ä½ å¯èƒ½ä¸å¤ªç†è§£ï¼Œæ²¡å…³ç³»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸¾ ğŸŒ° æ¥ç†è§£ KMPã€‚

### 1. åŒ¹é…è¿‡ç¨‹

åœ¨æ¨¡æ‹Ÿ KMP åŒ¹é…è¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆå»ºç«‹ä¸¤ä¸ªæ¦‚å¿µï¼š

å‰ç¼€ï¼šå¯¹äºå­—ç¬¦ä¸² `abcxxxxefg`ï¼Œæˆ‘ä»¬ç§° `abc` å±äº `abcxxxxefg` çš„æŸä¸ªå‰ç¼€ã€‚
åç¼€ï¼šå¯¹äºå­—ç¬¦ä¸² `abcxxxxefg`ï¼Œæˆ‘ä»¬ç§° `efg` å±äº `abcxxxxefg` çš„æŸä¸ªåç¼€ã€‚
ç„¶åæˆ‘ä»¬å‡è®¾åŸä¸²ä¸º `abeababeabf`ï¼ŒåŒ¹é…ä¸²ä¸º `abeabf`ï¼š



